{"remainingRequest":"E:\\Front\\vue-manage-system-dev\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Front\\vue-manage-system-dev\\src\\components\\page\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Front\\vue-manage-system-dev\\src\\components\\page\\Dashboard.vue","mtime":1586600308023},{"path":"E:\\Front\\vue-manage-system-dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Front\\vue-manage-system-dev\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\Front\\vue-manage-system-dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Front\\vue-manage-system-dev\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Schart from 'vue-schart';\r\nimport bus from '../common/bus';\r\nimport 'video.js/dist/video-js.css'\r\nimport 'videojs-flash'\r\nimport { videoPlayer } from 'vue-video-player';\r\nexport default {\r\n    name: 'dashboard',\r\n    data() {\r\n        return {\r\n            options:[],\r\n            value:'',\r\n            imgUrl:'',\r\n            picture:'',\r\n            tabPosition: 'left',\r\n            count:\r\n                {\r\n                    personNumber:'',\r\n                    placeName:'',\r\n                    nowTime:''\r\n                },\r\n            name: localStorage.getItem('ms_username'),\r\n            playerOptions: {\r\n                height: '300',\r\n                sources: [{\r\n                    type: \"rtmp/mp4\",\r\n                    src: \"rtmp://192.168.1.109:1935/live/home\"\r\n                }],\r\n                techOrder: ['flash'],\r\n                autoplay: false,\r\n                controls: true\r\n            }\r\n        };\r\n    },\r\n    components: {\r\n        videoPlayer,\r\n        Schart\r\n    },\r\n    computed: {\r\n        role() {\r\n            return this.name === 'admin' ? '超级管理员' : '普通用户';\r\n        }\r\n    },\r\n    created() {\r\n        //this.handleListener();\r\n        //this.changeDate();\r\n        this.getAddressName();\r\n        this.pushVideo(0);\r\n        this.getPicture();\r\n    },\r\n    // activated() {\r\n    //     this.handleListener();\r\n    // },\r\n    // deactivated() {\r\n    //     window.removeEventListener('resize', this.renderChart);\r\n    //     bus.$off('collapse', this.handleBus);\r\n    // },\r\n    methods: {\r\n        getAddressName(){\r\n            const that = this\r\n            this.$axios.get('http://localhost:9099/tourist/count/allAddressName').then(successResponse => {\r\n                that.options = successResponse.data\r\n            })\r\n        },\r\n        currentSel(selVal) {\r\n            this.param.address = selVal\r\n            console.log(this.param.address)\r\n        },\r\n        changeDate() {\r\n            const now = new Date().getTime();\r\n            this.data.forEach((item, index) => {\r\n                const date = new Date(now - (6 - index) * 86400000);\r\n                item.name = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\r\n            });\r\n        },\r\n        // handleListener() {\r\n        //     bus.$on('collapse', this.handleBus);\r\n        //     // 调用renderChart方法对图表进行重新渲染\r\n        //     window.addEventListener('resize', this.renderChart);\r\n        // },\r\n        // handleBus(msg) {\r\n        //     setTimeout(() => {\r\n        //         this.renderChart();\r\n        //     }, 200);\r\n        // },\r\n        // renderChart() {\r\n        //     this.$refs.bar.renderChart();\r\n        //     this.$refs.line.renderChart();\r\n        // }\r\n        countPerson(){\r\n            const _this = this\r\n            _this.$axios.get('http://localhost:9099/tourist/count/countPerson').then(function (response) {\r\n                _this.count = response.data\r\n            })\r\n        },\r\n        pushVideo(id){\r\n            const _this = this\r\n            _this.$axios.get('http://192.168.1.109:9099/tourist/video/camera',{params:{cameraId:id}}).then().catch(\r\n                failResponse => {\r\n                    console.log(failResponse)\r\n                }\r\n            )\r\n        },\r\n        getPicture(){\r\n            this.$axios.get('http://localhost:9099/tourist/count/ximage',{params:{pictureId:0},responseType: \"arraybuffer\"}).then(successResponse => {\r\n                return (\r\n                    \"data:image/png;base64,\" +\r\n                    btoa(\r\n                        new Uint8Array(successResponse.data).reduce(\r\n                            (data, byte) => data + String.fromCharCode(byte),\r\n                            \"\"\r\n                        )\r\n                    )\r\n                );\r\n            })\r\n                .then(data => {\r\n                    this.imgUrl = data; //赋值给img标签的src属性\r\n                });\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\r\n    <div>\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\">\r\n                <el-card shadow=\"hover\" class=\"mgb20\" >\r\n                    <div class=\"user-info\">\r\n                        <img src=\"../../assets/img/img.jpg\" class=\"user-avator\" alt />\r\n                        <div class=\"user-info-cont\">\r\n                            <div class=\"user-info-name\">{{name}}</div>\r\n                            <div>{{role}}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"user-info-list\">\r\n                        上次登录时间：\r\n                        <span>2019-11-01</span>\r\n                    </div>\r\n                    <div class=\"user-info-list\">\r\n                        上次登录地点：\r\n                        <span>东莞</span>\r\n                    </div>\r\n                </el-card>\r\n                <el-card shadow=\"hover\" style=\"height:340px;width: 420px\">\r\n                    <div slot=\"header\" class=\"clearfix\">\r\n                        <el-select v-model=\"value\" clearable placeholder=\"请选择\" value-key=\"value\" @change=\"currentSel(value)\">\r\n                            <el-option\r\n                                    v-for=\"item in options\"\r\n                                    :key=\"item.value\"\r\n                                    :label=\"item.label\"\r\n                                    :value=\"item.label\">\r\n                            </el-option>\r\n                        </el-select>\r\n                        <el-button type=\"primary\" style=\"float: right\">查看</el-button>\r\n                        <videoPlayer class=\"vjs-custom-skin videoPlayer\" :options=\"playerOptions\" ></videoPlayer>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n            <el-col :span=\"16\">\r\n                <el-card shadow=\"hover\" style=\"height:240px;margin-bottom: 20px;\">\r\n                    <el-alert\r\n                            title=\"景点一\"\r\n                            type=\"success\"\r\n                            description=\"测试1设置预警人数为80，当前人数59，未超过预警人数\"\r\n                            :closable=\"false\">\r\n                    </el-alert>\r\n                    <el-alert\r\n                            title=\"景点二\"\r\n                            type=\"info\"\r\n                            description=\"测试2设置预警人数为80，当前人数73，未超过预警人数\"\r\n                            close-text=\"知道了\">\r\n                    </el-alert>\r\n                    <el-alert\r\n                            title=\"景点三\"\r\n                            type=\"warning\"\r\n                            description=\"测试2设置预警人数为80，当前人数139，已经超过预警人数！\"\r\n                            @close=\"false\">\r\n                    </el-alert>\r\n                    <el-alert\r\n                            title=\"景点四\"\r\n                            type=\"info\"\r\n                            description=\"测试2设置预警人数为80，当前人数25，未超过预警人数\"\r\n                            close-text=\"知道了\">\r\n                    </el-alert>\r\n                    <el-alert\r\n                            title=\"景点五\"\r\n                            type=\"info\"\r\n                            description=\"测试2设置预警人数为80，当前人数67，未超过预警人数\"\r\n                            close-text=\"知道了\">\r\n                    </el-alert>\r\n                </el-card>\r\n                <el-card >\r\n                    <div >\r\n                        <div style=\"width: 420px;height: 319px;float:left;\">\r\n                            <img :src=\"imgUrl\" style=\"width: 420px;height: 319px\">\r\n                        </div>\r\n                        <div style=\"float: right;width: 360px;height: 319px;\">\r\n                            <el-tabs :tab-position=\"tabPosition\" style=\"height: 319px;\">\r\n                                <el-tab-pane label=\"今日天气\" style=\"white-space: normal\">天气状况 小雨 转阴 15℃～22℃ 东风3~4级 </el-tab-pane>\r\n                                <el-tab-pane label=\"明日天气\">天气状况 晴 转多云 16℃～22℃ 东风3~4级</el-tab-pane>\r\n                                <el-tab-pane label=\"一号景点人数\" style=\"white-space: normal\">当前人数:59</el-tab-pane>\r\n                                <el-tab-pane label=\"二号景点人数\">当前人数:73</el-tab-pane>\r\n                                <el-tab-pane label=\"三号景点人数\">当前人数:139</el-tab-pane>\r\n                                <el-tab-pane label=\"四号景点人数\">当前人数:25</el-tab-pane>\r\n                                <el-tab-pane label=\"五号景点人数\">当前人数:67</el-tab-pane>\r\n                            </el-tabs>\r\n                        </div>\r\n                    </div>\r\n                </el-card>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Schart from 'vue-schart';\r\nimport bus from '../common/bus';\r\nimport 'video.js/dist/video-js.css'\r\nimport 'videojs-flash'\r\nimport { videoPlayer } from 'vue-video-player';\r\nexport default {\r\n    name: 'dashboard',\r\n    data() {\r\n        return {\r\n            options:[],\r\n            value:'',\r\n            imgUrl:'',\r\n            picture:'',\r\n            tabPosition: 'left',\r\n            count:\r\n                {\r\n                    personNumber:'',\r\n                    placeName:'',\r\n                    nowTime:''\r\n                },\r\n            name: localStorage.getItem('ms_username'),\r\n            playerOptions: {\r\n                height: '300',\r\n                sources: [{\r\n                    type: \"rtmp/mp4\",\r\n                    src: \"rtmp://192.168.1.109:1935/live/home\"\r\n                }],\r\n                techOrder: ['flash'],\r\n                autoplay: false,\r\n                controls: true\r\n            }\r\n        };\r\n    },\r\n    components: {\r\n        videoPlayer,\r\n        Schart\r\n    },\r\n    computed: {\r\n        role() {\r\n            return this.name === 'admin' ? '超级管理员' : '普通用户';\r\n        }\r\n    },\r\n    created() {\r\n        //this.handleListener();\r\n        //this.changeDate();\r\n        this.getAddressName();\r\n        this.pushVideo(0);\r\n        this.getPicture();\r\n    },\r\n    // activated() {\r\n    //     this.handleListener();\r\n    // },\r\n    // deactivated() {\r\n    //     window.removeEventListener('resize', this.renderChart);\r\n    //     bus.$off('collapse', this.handleBus);\r\n    // },\r\n    methods: {\r\n        getAddressName(){\r\n            const that = this\r\n            this.$axios.get('http://localhost:9099/tourist/count/allAddressName').then(successResponse => {\r\n                that.options = successResponse.data\r\n            })\r\n        },\r\n        currentSel(selVal) {\r\n            this.param.address = selVal\r\n            console.log(this.param.address)\r\n        },\r\n        changeDate() {\r\n            const now = new Date().getTime();\r\n            this.data.forEach((item, index) => {\r\n                const date = new Date(now - (6 - index) * 86400000);\r\n                item.name = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\r\n            });\r\n        },\r\n        // handleListener() {\r\n        //     bus.$on('collapse', this.handleBus);\r\n        //     // 调用renderChart方法对图表进行重新渲染\r\n        //     window.addEventListener('resize', this.renderChart);\r\n        // },\r\n        // handleBus(msg) {\r\n        //     setTimeout(() => {\r\n        //         this.renderChart();\r\n        //     }, 200);\r\n        // },\r\n        // renderChart() {\r\n        //     this.$refs.bar.renderChart();\r\n        //     this.$refs.line.renderChart();\r\n        // }\r\n        countPerson(){\r\n            const _this = this\r\n            _this.$axios.get('http://localhost:9099/tourist/count/countPerson').then(function (response) {\r\n                _this.count = response.data\r\n            })\r\n        },\r\n        pushVideo(id){\r\n            const _this = this\r\n            _this.$axios.get('http://192.168.1.109:9099/tourist/video/camera',{params:{cameraId:id}}).then().catch(\r\n                failResponse => {\r\n                    console.log(failResponse)\r\n                }\r\n            )\r\n        },\r\n        getPicture(){\r\n            this.$axios.get('http://localhost:9099/tourist/count/ximage',{params:{pictureId:0},responseType: \"arraybuffer\"}).then(successResponse => {\r\n                return (\r\n                    \"data:image/png;base64,\" +\r\n                    btoa(\r\n                        new Uint8Array(successResponse.data).reduce(\r\n                            (data, byte) => data + String.fromCharCode(byte),\r\n                            \"\"\r\n                        )\r\n                    )\r\n                );\r\n            })\r\n                .then(data => {\r\n                    this.imgUrl = data; //赋值给img标签的src属性\r\n                });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.el-row {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.grid-content {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100px;\r\n}\r\n\r\n.grid-cont-right {\r\n    flex: 1;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: #999;\r\n}\r\n\r\n.grid-num {\r\n    font-size: 30px;\r\n    font-weight: bold;\r\n}\r\n\r\n.grid-con-icon {\r\n    font-size: 50px;\r\n    width: 100px;\r\n    height: 100px;\r\n    text-align: center;\r\n    line-height: 100px;\r\n    color: #fff;\r\n}\r\n\r\n.grid-con-1 .grid-con-icon {\r\n    background: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-1 .grid-num {\r\n    color: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-2 .grid-con-icon {\r\n    background: rgb(100, 213, 114);\r\n}\r\n\r\n.grid-con-2 .grid-num {\r\n    color: rgb(45, 140, 240);\r\n}\r\n\r\n.grid-con-3 .grid-con-icon {\r\n    background: rgb(242, 94, 67);\r\n}\r\n\r\n.grid-con-3 .grid-num {\r\n    color: rgb(242, 94, 67);\r\n}\r\n\r\n.user-info {\r\n    display: flex;\r\n    align-items: center;\r\n    padding-bottom: 20px;\r\n    border-bottom: 2px solid #ccc;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.user-avator {\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n}\r\n\r\n.user-info-cont {\r\n    padding-left: 50px;\r\n    flex: 1;\r\n    font-size: 14px;\r\n    color: #999;\r\n}\r\n\r\n.user-info-cont div:first-child {\r\n    font-size: 30px;\r\n    color: #222;\r\n}\r\n\r\n.user-info-list {\r\n    font-size: 14px;\r\n    color: #999;\r\n    line-height: 25px;\r\n}\r\n\r\n.user-info-list span {\r\n    margin-left: 70px;\r\n}\r\n\r\n.mgb20 {\r\n    margin-bottom: 20px;\r\n    width: 420px;\r\n    height: 240px;\r\n}\r\n\r\n.todo-item {\r\n    font-size: 14px;\r\n}\r\n\r\n.todo-item-del {\r\n    text-decoration: line-through;\r\n    color: #999;\r\n}\r\n\r\n.schart {\r\n    width: 100%;\r\n    height: 300px;\r\n}\r\n</style>\r\n"]}]}